<div class="wrapper bottom-margin video-component">
    {%- assign videoId = 'video' | append: dataID -%}
    {%- assign showVideoId = 'showVideoId' | append: dataID -%}
    {%- assign hideVideoId = 'hideVideoId' | append: dataID -%}
    {%- assign buttonToggleVideo = false -%}
    {%- assign videoDescription = data.videoDescription | strip_html -%}

    {% if data.videoCredit.length > 0 %}
        {%- assign creditPlaceholder = data.videoCredit | prepend: "Credit: " | strip_html -%}
    {% endif %}

    {% if data.videoSource == "brightcove" -%}
    
        <div class="brightcove">
            <amp-brightcove
                data-account="23648095001"

            {%comment%}
                The player id originally was pulled out of the CMS. For now we are pointing
                at a "test player" built by distribution
                data-player="{{ data.videoId }}"
            {%endcomment%}
                data-player="Kl2Y7HovlM"
                data-video-id="{{ data.videoId }}"
                layout="responsive"
                width="760"
                height="420"
                noloading
            >
            </amp-brightcove>
        </div>
   
    {% elsif data.videoSource == "youTube" %}
    
    {%- assign videoId = data.videoId | split: '=' | last -%}
    
        <div class="youtube">

        {%comment%}
            The player will always be 16x9 (widescreen) and take up the "full width" of it's parent.
            The Youtube player itself will determine the height/width of the video source, and letterbox
            as needed.
            The Placeholder image will be stretched to "full width" regardless of thumbnail dimensions.
        {%endcomment%}

            <amp-youtube
                width="16"
                height="9"
                layout="responsive"
                data-param-modestbranding="1"
                data-param-rel="1"
                data-videoid="{{ videoId }}"
            >
                <amp-img
                    src="http://i3.ytimg.com/vi/mM5_T-F1Yn4/hqdefault.jpg"
                    placeholder
                    layout="fill"
                ></amp-img>
            </amp-youtube>

        </div>
    {%- endif -%}
    
    <div class="description-container">
        <div class="description-flex-container">
            <div class="description-text-less" id="{{ videoId }}" [class]="buttonToggleVideo ? 'description-text-more' : 'description-text-less'">
                {% if data.videoDescription.length > 0 %}
                    {{videoDescription}}
                {% endif %}
                {% if data.videoCredit.length > 0 and data.videoCredit != null %}
                    <p class="video-credit">{{creditPlaceholder}}</p>
                {% endif %}
            </div>
            <button class="transcript-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                <path d="M1.007 13.997v1.974l13.986.005v-1.974" stroke="#292929" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M8.003 11.998v-10" stroke="#292929" stroke-width="2" stroke-linecap="round" />
                <path d="m3.006 8.248 4.997 4 4.998-4" stroke="#292929" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
                Transcript
            </button>
        </div>
        {% if data.videoDescription.length > 204 %}
            <button
                class="show-more-button"
                id="{{ showVideoId }}"
                on="tap:{{ showVideoId }}.hide,{{ hideVideoId }}.show, AMP.setState({ buttonToggleVideo: true })"
            >
                Show more
            </button>
            <button
                hidden
                id="{{ hideVideoId }}"
                class="show-less-button"
                on="tap:{{ showVideoId }}.show,{{ hideVideoId }}.hide,AMP.setState({ buttonToggleVideo: false })"
            >
                Show less
            </button>
        {% endif %}
    </div>
</div>
